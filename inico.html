<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tu360 ‚Äì Vuelos</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
*{
  box-sizing:border-box;
  font-family:'Roboto', Arial, sans-serif;
}

body{
  margin:0;
  background:#f4f4f4;
}

.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:14px 18px;
  background:#fff;
  font-weight:600;
}

.header img{
  height:28px;
}

.hero{
  position:relative;
  background:url("https://viajestu360compras.bancolombia.com/portals/27/Images/Genericas/Vuelos-Mobile.webp") no-repeat center/cover;
  height:320px;
}

.tabs{
  display:flex;
  justify-content:space-around;
  position:absolute;
  bottom:-28px;
  left:0;
  right:0;
}

.tab{
  width:64px;
  height:64px;
  background:#fff;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 4px 10px rgba(0,0,0,.15);
}

.tab.active{
  background:#ffd100;
}

.form-container{
  background:#fff;
  margin:4px auto 20px;
  padding:28px 20px 32px;
  max-width:360px;
  width:100%;
  border-radius:30px;
  box-shadow:0 4px 14px rgba(0,0,0,.08);
}

.field{
  display:flex;
  align-items:center;
  margin-bottom:18px;
  border-bottom:1px solid #ccc;
  padding-bottom:8px;
  cursor:pointer;
}

.field i{
  margin-right:10px;
}

.field input{
  border:none;
  outline:none;
  width:100%;
  font-size:16px;
  background:none;
}

.row{
  display:flex;
  gap:20px;
}

/* SELECTOR IDA / VUELTA */
.trip-type{
  display:flex;
  gap:20px;
  margin-bottom:20px;
}

.trip-type label{
  display:flex;
  align-items:center;
  gap:8px;
  cursor:pointer;
}

/* BOTON */
.btn{
  width:100%;
  background:#ffd100;
  border:none;
  border-radius:30px;
  padding:14px;
  font-size:18px;
  font-weight:600;
}

/* MODAL PASAJEROS */
.passenger-modal{
  position:fixed;
  inset:0;
  background:#fff;
  z-index:9999;
  display:none;
  flex-direction:column;
}

.passenger-modal.active{
  display:flex;
}

.passenger-header{
  background:#2b2b2b;
  color:#fff;
  padding:16px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.passenger-content{
  padding:20px;
}

.counter-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:20px;
}

.counter{
  display:flex;
  align-items:center;
  gap:10px;
}

.counter button{
  width:34px;
  height:34px;
}

.apply-btn{
  margin-top:auto;
  padding:16px;
}

  /* -------- MODAL CIUDADES -------- */
.city-modal{
  position:fixed;
  inset:0;
  background:#f4f4f4;
  z-index:9998;
  display:none;
  flex-direction:column;
}

.city-modal.active{
  display:flex;
}

.city-header{
  background:#2b2b2b;
  color:#fff;
  padding:16px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.city-search{
  background:#2b2b2b;
  padding:12px;
}

.city-search input{
  width:100%;
  padding:10px;
  border-radius:8px;
}

.city-list{
  background:#fff;
  margin:12px;
  border-radius:12px;
  overflow:auto;
}

.city-item{
  padding:14px;
  border-bottom:1px solid #eee;
  cursor:pointer;
}

/* -------- MODAL CALENDARIO -------- */
.calendar-modal{
  position:fixed;
  inset:0;
  background:#f4f4f4;
  z-index:9997;
  display:none;
  flex-direction:column;
}

.calendar-modal.active{
  display:flex;
}

.calendar-header{
  background:#2b2b2b;
  color:#fff;
  padding:16px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.calendar-container{
  background:#fff;
  padding:20px;
  height:calc(100vh - 70px);
  overflow-y:scroll;
}

.calendar-month{
  margin-bottom:30px;
}

.calendar-title{
  font-weight:bold;
  margin-bottom:10px;
  text-transform:capitalize;
}

.calendar-grid{
  display:grid;
  grid-template-columns:repeat(7, 1fr);
  gap:6px;
  text-align:center;
}

.day{
  padding:10px;
  cursor:pointer;
  border-radius:6px;
}

.day:hover{
  background:#ffd100;
}

.day.disabled{
  color:#ccc;
  pointer-events:none;
}




</style>
</head>

<body>

<div class="header">
  <img src="https://viajestu360compras.bancolombia.com/Portals/27/logo-tu360compras.png">
  <span>Menu</span>
</div>

<div class="hero">
  <div class="tabs">
    <div class="tab"><i class="fa fa-suitcase"></i></div>
    <div class="tab"><i class="fa fa-bed"></i></div>
    <div class="tab active"><i class="fa fa-plane"></i></div>
    <div class="tab"><i class="fa fa-ticket"></i></div>
    <div class="tab"><i class="fa fa-car"></i></div>
  </div>
</div>

<div class="form-container">

  <h2>Paquetes tur√≠sticos</h2>

  <!-- SELECTOR IDA / VUELTA -->
  <div class="trip-type">
    <label>
      <input type="radio" name="tipo" checked onclick="setTripType('round')">
      Ida y vuelta
    </label>

    <label>
      <input type="radio" name="tipo" onclick="setTripType('oneway')">
      Solo ida
    </label>
  </div>

  <div class="field" onclick="openCityModal('origen')">
    <i class="fa fa-dot-circle-o"></i>
    <input id="origenInput" placeholder="Origen" readonly>
  </div>

  <div class="field" onclick="openCityModal('destino')">
    <i class="fa fa-map-marker"></i>
    <input id="destinoInput" placeholder="Destino" readonly>
  </div>

  <div class="row">
    <div class="field" onclick="openCalendar('ida')">
      <i class="fa fa-calendar"></i>
      <input id="idaInput" placeholder="Ida" readonly>
    </div>

    <div class="field" id="returnField" onclick="openCalendar('vuelta')">
      <i class="fa fa-calendar"></i>
      <input id="vueltaInput" placeholder="Vuelta" readonly>
    </div>
  </div>

  <div class="field" onclick="openPassengerModal()">
    <i class="fa fa-user"></i>
    <input id="passengerInput" value="1 pasajero" readonly>
  </div>

 <button class="btn" onclick="irAResultados()">Buscar</button>



</div>



  <!-- ===== MODAL CIUDADES ===== -->
<div class="city-modal" id="cityModal">

  <div class="city-header">
    <span id="cityTitle"></span>
    <button onclick="closeCityModal()">‚úï</button>
  </div>

  <div class="city-search">
    <input placeholder="Buscar ciudad" onkeyup="filtrarCiudades(this.value)">
  </div>

  <div class="city-list" id="cityList"></div>

</div>

<!-- ===== MODAL CALENDARIO ===== -->
<div class="calendar-modal" id="calendarModal">

  <div class="calendar-header">
    <span id="calendarTitle"></span>
    <button onclick="closeCalendar()">‚úï</button>
  </div>

  <div class="calendar-container" id="calendarBox"></div>

</div>


<!-- MODAL PASAJEROS -->
<div class="passenger-modal" id="passengerModal">

  <div class="passenger-header">
    <span>Pasajeros</span>
    <button onclick="closePassengerModal()">‚úï</button>
  </div>

  <div class="passenger-content">

    <div class="counter-row">
      <div>
        <b>Adultos</b><br>
        13+ a√±os
      </div>

      <div class="counter">
        <button onclick="change('adultos',-1)">-</button>
        <span id="adultos">1</span>
        <button onclick="change('adultos',1)">+</button>
      </div>
    </div>

    <div class="counter-row">
      <div>
        <b>Ni√±os</b>
      </div>

      <div class="counter">
        <button onclick="change('ninos',-1)">-</button>
        <span id="ninos">0</span>
        <button onclick="change('ninos',1)">+</button>
      </div>
    </div>

  </div>

  <div class="apply-btn">
    <button class="btn" onclick="applyPassengers()">Aplicar</button>
  </div>

</div>

<script>

let tipoViaje = "round";

function setTripType(tipo){
  tipoViaje = tipo;

  document.getElementById("returnField").style.display =
    tipo === "oneway" ? "none" : "flex";
}

// PASAJEROS
function openPassengerModal(){
  document.getElementById("passengerModal").classList.add("active");
}

function closePassengerModal(){
  document.getElementById("passengerModal").classList.remove("active");
}

function change(id, v){
  let e = document.getElementById(id);
  let n = parseInt(e.innerText) + v;

  if(id === "adultos" && n < 1) return;
  if(id === "ninos" && n < 0) return;

  e.innerText = n;
}

function applyPassengers(){
  let a = document.getElementById("adultos").innerText;
  let n = document.getElementById("ninos").innerText;

  let total = parseInt(a) + parseInt(n);

  document.getElementById("passengerInput").value =
    total + " pasajeros";

  closePassengerModal();
}

  // ===== AEROPUERTOS DE COLOMBIA =====
const aeropuertos = [
"Bogot√° - El Dorado (BOG)",
"Medell√≠n - Jos√© Mar√≠a C√≥rdova (MDE)",
"Cali - Alfonso Bonilla Arag√≥n (CLO)",
"Cartagena - Rafael N√∫√±ez (CTG)",
"Barranquilla - Ernesto Cortissoz (BAQ)",
"Bucaramanga - Palonegro (BGA)",
"Pereira - Mateca√±a (PEI)",
"Santa Marta - Sim√≥n Bol√≠var (SMR)",
"C√∫cuta - Camilo Daza (CUC)",
"Monter√≠a - Los Garzones (MTR)",
"Valledupar - Alfonso L√≥pez (VUP)",
"Armenia - El Ed√©n (AXM)",
"Manizales - La Nubia (MZL)",
"Neiva - Benito Salas (NVA)",
"Villavicencio - Vanguardia (VVC)",
"San Andr√©s - Gustavo Rojas Pinilla (ADZ)"
];

let campoActivo = "";

function openCityModal(tipo){
  campoActivo = tipo;

  document.getElementById("cityTitle").innerText =
    tipo === "origen" ? "Ciudad de Origen" : "Ciudad de Destino";

  renderCities(aeropuertos);

  document.getElementById("cityModal").classList.add("active");
}

function closeCityModal(){
  document.getElementById("cityModal").classList.remove("active");
}

function renderCities(lista){
  const box = document.getElementById("cityList");
  box.innerHTML = "";

  lista.forEach(c => {
    box.innerHTML += `
      <div class="city-item" onclick="selectCity('${c}')">
        ${c}
      </div>
    `;
  });
}

function filtrarCiudades(t){
  const f = aeropuertos.filter(a =>
    a.toLowerCase().includes(t.toLowerCase())
  );
  renderCities(f);
}

function selectCity(c){
  document.getElementById(
    campoActivo === "origen" ? "origenInput" : "destinoInput"
  ).value = c;

  closeCityModal();
}

// ===== CALENDARIO REAL =====

let tipoFecha = "";
let fechaIdaSeleccionada = null;

function openCalendar(tipo){
  tipoFecha = tipo;

  document.getElementById("calendarTitle").innerText =
    tipo === "ida" ? "Fecha de ida" : "Fecha de vuelta";

  generarCalendario();

  document.getElementById("calendarModal").classList.add("active");
}

function closeCalendar(){
  document.getElementById("calendarModal").classList.remove("active");
}

function generarCalendario(){

  let box = document.getElementById("calendarBox");
  box.innerHTML = "";

  let hoy = new Date();
  hoy.setHours(0,0,0,0);

  for(let m = 0; m < 12; m++){

    let mes = new Date(hoy.getFullYear(), hoy.getMonth() + m, 1);

    let diasEnMes = new Date(
      mes.getFullYear(),
      mes.getMonth() + 1,
      0
    ).getDate();

    let nombreMes = mes.toLocaleString("es", { month: "long" });
    let anio = mes.getFullYear();

    box.innerHTML += `
      <div class="calendar-month">
        <div class="calendar-title">
          ${nombreMes} ${anio}
        </div>

        <div class="calendar-grid" id="grid-${m}"></div>
      </div>
    `;

    let grid = document.getElementById(`grid-${m}`);

    for(let d = 1; d <= diasEnMes; d++){

      let fechaDia = new Date(anio, mes.getMonth(), d);
      fechaDia.setHours(0,0,0,0);

      let clase = "day";

      if(fechaDia < hoy){
        clase += " disabled";
      }

      if(tipoFecha === "vuelta" && fechaIdaSeleccionada){
        if(fechaDia <= fechaIdaSeleccionada){
          clase += " disabled";
        }
      }

      grid.innerHTML += `
        <div class="${clase}" onclick="selectDate('${anio}-${mes.getMonth()+1}-${d}')">
          ${d}
        </div>
      `;
    }
  }
}

function selectDate(fecha){

  let partes = fecha.split("-");
  let fechaReal = new Date(partes[0], partes[1]-1, partes[2]);

  // NUEVO FORMATO NUM√âRICO DD/MM/YYYY
  let dia = ("0" + fechaReal.getDate()).slice(-2);
  let mes = ("0" + (fechaReal.getMonth() + 1)).slice(-2);
  let anio = fechaReal.getFullYear();

  let texto = `${dia}/${mes}/${anio}`;

  if(tipoFecha === "ida"){
    document.getElementById("idaInput").value = texto;
    fechaIdaSeleccionada = fechaReal;
    document.getElementById("vueltaInput").value = "";
  } 
  else {
    document.getElementById("vueltaInput").value = texto;
  }

  closeCalendar();
}
function irAResultados(){

  let origen = document.getElementById("origenInput").value;
  let destino = document.getElementById("destinoInput").value;
  let ida = document.getElementById("idaInput").value;
  let vuelta = document.getElementById("vueltaInput").value;
  let pasajeros = document.getElementById("passengerInput").value;

  if(!origen || !destino || !ida){
    alert("Completa origen, destino y fecha de ida");
    return;
  }

  let url = "resultados.html?" +
    "origen=" + encodeURIComponent(origen) +
    "&destino=" + encodeURIComponent(destino) +
    "&ida=" + encodeURIComponent(ida) +
    "&vuelta=" + encodeURIComponent(vuelta) +
    "&pasajeros=" + encodeURIComponent(pasajeros) +
    "&tipo=" + tipoViaje;   // üëà AQU√ç estaba el error

  window.location.href = url;
}


</script>

</body>
</html>
