<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tu360 ‚Äì Vuelos</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
*{
  box-sizing:border-box;
  font-family:'Roboto', Arial, sans-serif;
}

body{
  margin:0;
  background:#f4f4f4;
}

.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:14px 18px;
  background:#fff;
  font-weight:600;
}

.hero{
  position:relative;
  background:url("https://viajestu360compras.bancolombia.com/portals/27/Images/Genericas/Vuelos-Mobile.webp") no-repeat center/cover;
  height:320px;
}

.form-container{
  background:#fff;
  margin:4px auto 20px;
  padding:28px 20px 32px;
  max-width:360px;
  width:100%;
  border-radius:30px;
}

.field{
  display:flex;
  align-items:center;
  margin-bottom:18px;
  border-bottom:1px solid #ccc;
  padding-bottom:8px;
  cursor:pointer;
}

.field input{
  border:none;
  outline:none;
  width:100%;
  font-size:16px;
}

.row{
  display:flex;
  gap:20px;
}

.btn{
  width:100%;
  background:#ffd100;
  border:none;
  border-radius:30px;
  padding:14px;
  font-size:18px;
  font-weight:600;
}

/* MODAL CALENDARIO */
.modal{
  position:fixed;
  inset:0;
  background:#f4f4f4;
  z-index:9999;
  display:none;
  flex-direction:column;
}

.modal.active{
  display:flex;
}

.modal-header{
  background:#2b2b2b;
  color:#fff;
  padding:16px;
  display:flex;
  justify-content:space-between;
}

.calendar-container{
  background:#fff;
  padding:20px;
  flex:1;
  overflow:auto;
}

.month{
  margin-bottom:30px;
}

.month-title{
  font-weight:bold;
  margin-bottom:10px;
  text-align:center;
}

.days{
  display:grid;
  grid-template-columns:repeat(7, 1fr);
  text-align:center;
}

.day{
  padding:10px;
  cursor:pointer;
  border-radius:6px;
}

.day:hover{
  background:#ffd100;
}

.disabled{
  color:#ccc;
  pointer-events:none;
}

.selected{
  background:#ffd100;
}
</style>
</head>

<body>

<div class="header">
  <div>Tu360 Compras</div>
  <div>Menu</div>
</div>

<div class="hero"></div>

<div class="form-container">

  <h2>Vuelos</h2>

  <div class="field" onclick="openCalendar('ida')">
    <i class="fa fa-calendar"></i>
    <input id="idaInput" placeholder="Ida" readonly>
  </div>

  <div class="field" onclick="openCalendar('vuelta')">
    <i class="fa fa-calendar"></i>
    <input id="vueltaInput" placeholder="Vuelta" readonly>
  </div>

  <button class="btn" onclick="validarBusqueda()">Buscar</button>

</div>

<!-- MODAL CALENDARIO -->
<div class="modal" id="calendarModal">
  <div class="modal-header">
    <span id="calendarTitle"></span>
    <button onclick="closeCalendar()">‚úï</button>
  </div>

  <div class="calendar-container" id="calendarBox"></div>
</div>

<script>

let tipoFecha = "";
let fechaIdaSeleccionada = null;

function openCalendar(tipo){
  tipoFecha = tipo;

  document.getElementById("calendarTitle").innerText =
    tipo === "ida" ? "Fecha de partida" : "Fecha de regreso";

  generarCalendario();
  document.getElementById("calendarModal").classList.add("active");
}

function closeCalendar(){
  document.getElementById("calendarModal").classList.remove("active");
}

function generarCalendario(){

  const box = document.getElementById("calendarBox");
  box.innerHTML = "";

  const hoy = new Date();

  for(let i = 0; i < 6; i++){

    const fecha = new Date(hoy.getFullYear(), hoy.getMonth() + i, 1);

    let html = `
      <div class="month">
        <div class="month-title">
          ${fecha.toLocaleString('es',{month:'long'})} ${fecha.getFullYear()}
        </div>

        <div class="days">
    `;

    const primerDia = new Date(fecha.getFullYear(), fecha.getMonth(), 1).getDay();

    for(let j = 0; j < primerDia; j++){
      html += `<div></div>`;
    }

    const diasMes = new Date(fecha.getFullYear(), fecha.getMonth() + 1, 0).getDate();

    for(let d = 1; d <= diasMes; d++){

      let fechaActual = new Date(fecha.getFullYear(), fecha.getMonth(), d);

      let clase = "day";

      if(fechaActual < hoy){
        clase += " disabled";
      }

      if(tipoFecha === "vuelta" && fechaIdaSeleccionada){
        if(fechaActual <= fechaIdaSeleccionada){
          clase += " disabled";
        }
      }

      html += `
        <div class="${clase}" 
             onclick="selectDate(${fecha.getFullYear()},${fecha.getMonth()},${d})">
          ${d}
        </div>
      `;
    }

    html += `</div></div>`;

    box.innerHTML += html;
  }
}

function selectDate(anio, mes, dia){

  const seleccionada = new Date(anio, mes, dia);

  const texto = `${dia}/${mes+1}/${anio}`;

  if(tipoFecha === "ida"){
    fechaIdaSeleccionada = seleccionada;
    document.getElementById("idaInput").value = texto;

    document.getElementById("vueltaInput").value = "";
  } 
  else {
    document.getElementById("vueltaInput").value = texto;
  }

  closeCalendar();
}

function validarBusqueda(){

  const ida = document.getElementById("idaInput").value;
  const vuelta = document.getElementById("vueltaInput").value;

  if(!ida){
    alert("Selecciona fecha de ida");
    return;
  }

  if(!vuelta){
    alert("Selecciona fecha de vuelta");
    return;
  }

  alert("B√∫squeda v√°lida üëç");
}

</script>

</body>
</html>
